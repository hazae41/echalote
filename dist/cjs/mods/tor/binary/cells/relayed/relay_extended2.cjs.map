{"version":3,"file":"relay_extended2.cjs","sources":["../../../../../../../src/mods/tor/binary/cells/relayed/relay_extended2.ts"],"sourcesContent":["import { Binary } from \"libs/binary.js\";\nimport { RelayCell } from \"mods/tor/binary/cells/direct/relay.js\";\nimport { Circuit } from \"mods/tor/circuit.js\";\n\nexport class RelayExtended2Cell {\n  readonly class = RelayExtended2Cell\n\n  static rcommand = 15\n\n  constructor(\n    readonly circuit: Circuit,\n    readonly stream: undefined,\n    readonly data: Buffer\n  ) { }\n\n  async pack() {\n    return await this.cell().pack()\n  }\n\n  cell(): RelayCell {\n    throw new Error(`Unimplemented`)\n  }\n\n  static uncell(cell: RelayCell) {\n    if (cell.rcommand !== this.rcommand)\n      throw new Error(`Invalid RELAY_EXTENDED2 relay cell relay command`)\n    if (cell.stream)\n      throw new Error(`Can't uncell RELAY_EXTENDED2 relay cell on stream > 0`)\n\n    const binary = new Binary(cell.data)\n\n    const length = binary.readUint16()\n    const data = binary.read(length)\n\n    return new this(cell.circuit, cell.stream, data)\n  }\n}"],"names":["binary","Binary"],"mappings":";;;;;MAIa,kBAAkB,CAAA;AAK7B,IAAA,WAAA,CACW,OAAgB,EAChB,MAAiB,EACjB,IAAY,EAAA;QAFZ,IAAO,CAAA,OAAA,GAAP,OAAO,CAAS;QAChB,IAAM,CAAA,MAAA,GAAN,MAAM,CAAW;QACjB,IAAI,CAAA,IAAA,GAAJ,IAAI,CAAQ;QAPd,IAAK,CAAA,KAAA,GAAG,kBAAkB,CAAA;KAQ9B;IAEC,IAAI,GAAA;;YACR,OAAO,MAAM,IAAI,CAAC,IAAI,EAAE,CAAC,IAAI,EAAE,CAAA;SAChC,CAAA,CAAA;AAAA,KAAA;IAED,IAAI,GAAA;AACF,QAAA,MAAM,IAAI,KAAK,CAAC,CAAA,aAAA,CAAe,CAAC,CAAA;KACjC;IAED,OAAO,MAAM,CAAC,IAAe,EAAA;AAC3B,QAAA,IAAI,IAAI,CAAC,QAAQ,KAAK,IAAI,CAAC,QAAQ;AACjC,YAAA,MAAM,IAAI,KAAK,CAAC,CAAA,gDAAA,CAAkD,CAAC,CAAA;QACrE,IAAI,IAAI,CAAC,MAAM;AACb,YAAA,MAAM,IAAI,KAAK,CAAC,CAAA,qDAAA,CAAuD,CAAC,CAAA;QAE1E,MAAMA,QAAM,GAAG,IAAIC,aAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAA;AAEpC,QAAA,MAAM,MAAM,GAAGD,QAAM,CAAC,UAAU,EAAE,CAAA;QAClC,MAAM,IAAI,GAAGA,QAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CAAA;AAEhC,QAAA,OAAO,IAAI,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,CAAA;KACjD;;AA5BM,kBAAQ,CAAA,QAAA,GAAG,EAAE;;;;"}