{"version":3,"file":"http.cjs","sources":["../../../../../src/mods/tor/streams/http.ts"],"sourcesContent":["import { Binary } from \"libs/binary.js\"\nimport { Future } from \"libs/future.js\"\nimport { Strings } from \"libs/strings.js\"\n\nexport type HttpState =\n  | HttpNoneState\n  | HttpHeadedState\n\nexport interface HttpNoneState {\n  type: \"none\"\n  buffer: Binary\n}\n\nexport interface HttpHeadedState {\n  type: \"headed\",\n  length: number,\n  version: string,\n  encoding: HttpEncoding\n}\n\nexport type HttpEncoding =\n  | HttpChunkedEncoding\n  | HttpLengthedEncoding\n\nexport interface HttpChunkedEncoding {\n  type: \"chunked\",\n  buffer: Binary\n}\n\nexport interface HttpLengthedEncoding {\n  type: \"lengthed\",\n  length: number\n}\n\nexport class HttpStream extends EventTarget {\n  readonly res = new Future<Response, unknown>()\n\n  /**\n   * HTTP output bufferer\n   */\n  readonly rstreams = new TransformStream<Buffer, Buffer>()\n\n  /**\n   * HTTP input bufferer\n   */\n  readonly wstreams = new TransformStream<Buffer, Buffer>()\n\n  state: HttpState = { type: \"none\", buffer: Binary.allocUnsafe(10 * 1024) }\n\n  constructor(\n    readonly sstreams: ReadableWritablePair<Buffer, Buffer>,\n    readonly req = new Request(\"/\"),\n    readonly url = new URL(req.url)\n  ) {\n    super()\n\n    if (req.body)\n      req.body.pipeTo(this.wstreams.writable)\n    else\n      this.wstreams.writable.close()\n\n    this.tryRead().catch(console.error)\n    this.tryWrite().catch(console.error)\n  }\n\n  private async tryWrite() {\n    const reader = this.wstreams.readable.getReader()\n\n    try {\n      await this.write(reader)\n    } catch (e: unknown) {\n      console.error(e)\n\n      const writer = this.sstreams.writable.getWriter()\n      writer.abort(e)\n      writer.releaseLock()\n    } finally {\n      reader.releaseLock()\n    }\n  }\n\n  private async write(reader: ReadableStreamReader<Buffer>) {\n    await this.onWriteStart()\n\n    while (true) {\n      const { done, value } = await reader.read()\n\n      if (done) break\n\n      await this.onWrite(value)\n    }\n\n    if (this.req.signal.aborted) return\n\n    await this.onWriteEnd()\n  }\n\n  private async onWriteStart() {\n    let head = `${this.req.method} ${this.url.pathname} HTTP/1.1\\r\\n`\n    head += `Host: ${this.url.host}\\r\\n`\n    head += `Transfer-Encoding: chunked\\r\\n`\n    this.req.headers.forEach((v, k) => head += `${k}: ${v}\\r\\n`)\n    head += `\\r\\n`\n\n    const writer = this.sstreams.writable.getWriter()\n    writer.write(Buffer.from(head))\n    writer.releaseLock()\n  }\n\n  private async onWrite(chunk: Buffer) {\n    const length = chunk.length.toString(16)\n    const line = `${length}\\r\\n${chunk.toString()}\\r\\n`\n\n    const writer = this.sstreams.writable.getWriter()\n    writer.write(Buffer.from(line))\n    writer.releaseLock()\n  }\n\n  private async onWriteEnd() {\n    const buffer = Buffer.from(`0\\r\\n\\r\\n\\r\\n`)\n\n    const writer = this.sstreams.writable.getWriter()\n    writer.write(buffer)\n    writer.close()\n    writer.releaseLock()\n  }\n\n  private async tryRead() {\n    const reader = this.sstreams.readable.getReader()\n\n    try {\n      await this.read(reader)\n    } catch (e: unknown) {\n      console.error(e)\n\n      const writer = this.rstreams.writable.getWriter()\n      writer.abort(e)\n      writer.releaseLock()\n\n      this.res.err(e)\n    } finally {\n      reader.releaseLock()\n    }\n  }\n\n  private async read(reader: ReadableStreamReader<Buffer>) {\n    while (true) {\n      const { done, value } = await reader.read()\n\n      if (done) break\n\n      await this.onRead(value)\n    }\n  }\n\n  private async onRead(chunk: Buffer) {\n    if (this.state.type === \"none\") {\n      const { buffer } = this.state\n\n      buffer.write(chunk)\n\n      const split = buffer.buffer.indexOf(\"\\r\\n\\r\\n\")\n\n      if (split === -1) return\n\n      const head = buffer.buffer.subarray(0, split)\n      const body = buffer.buffer.subarray(split + \"\\r\\n\\r\\n\".length, buffer.offset)\n\n      const [info, ...rawHeaders] = head.toString().split(\"\\r\\n\")\n      const [version, statusString, statusText] = info.split(\" \")\n\n      const status = Number(statusString)\n      const headers = new Headers(rawHeaders.map(it => Strings.splitOnce(it, \": \")))\n      this.res.ok(new Response(this.rstreams.readable, { headers, status, statusText }))\n\n      const encoding = headers.get(\"transfer-encoding\")\n\n      if (encoding === \"chunked\") {\n        const encoding: HttpChunkedEncoding = { type: \"chunked\", buffer: Binary.allocUnsafe(10 * 1024) }\n        this.state = { type: \"headed\", version, encoding, length: 0 }\n      } else if (encoding === null) {\n        const length = Number(headers.get(\"content-length\"))\n        const encoding: HttpLengthedEncoding = { type: \"lengthed\", length }\n        this.state = { type: \"headed\", version, encoding, length: 0 }\n      } else {\n        throw new Error(`Unsupported encoding ${encoding}`)\n      }\n\n      chunk = body\n    }\n\n    if (this.state.encoding.type === \"lengthed\") {\n      const writer = this.rstreams.writable.getWriter()\n      writer.write(chunk)\n\n      this.state.length += chunk.length\n\n      if (this.state.length > this.state.encoding.length)\n        console.warn(`Length > Content-Length`)\n      if (this.state.length >= this.state.encoding.length)\n        writer.close()\n\n      writer.releaseLock()\n      return\n    }\n\n    if (this.state.encoding.type === \"chunked\") {\n      const { buffer } = this.state.encoding\n\n      buffer.write(chunk)\n\n      let slice = buffer.buffer.subarray(0, buffer.offset)\n\n      while (slice.length) {\n        const index = slice.indexOf(\"\\r\\n\")\n\n        // [...] => partial header => wait\n        if (index === -1) return\n\n        // [length]\\r\\n(...) => full header => split it\n        const length = parseInt(slice.subarray(0, index).toString(), 16)\n        const rest = slice.subarray(index + 2)\n\n        if (length === 0) {\n          const writer = this.rstreams.writable.getWriter()\n          writer.close()\n          writer.releaseLock()\n          return\n        }\n\n        // len(...) < length + len(\\r\\n) => partial chunk => wait\n        if (rest.length < length + 2) break\n\n        // ([length]\\r\\n)[chunk]\\r\\n(...) => full chunk => split it\n        const chunk2 = rest.subarray(0, length)\n        const rest2 = rest.subarray(length + 2)\n\n        const writer = this.rstreams.writable.getWriter()\n        writer.write(chunk2)\n        writer.releaseLock()\n\n        buffer.offset = 0\n        buffer.write(rest2)\n\n        slice = buffer.buffer.subarray(0, buffer.offset)\n      }\n\n      return\n    }\n  }\n}"],"names":["Future","Binary","Strings"],"mappings":"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"}